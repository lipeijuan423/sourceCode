#!/usr/bin/env node
const program = require("commander");
const Printer = require('@darkobits/lolcatjs');
const chalk = require("chalk");
const inquirer = require("inquirer");
const shelljs = require("shelljs");
const userHome = require("user-home");
const ora = require("ora");
const input = [
    "              _ ",
    "  _   _    __| |",
    " | | | |   / _` |",
    " | |_| | |  (_| |",
    "  \__, |  \__,_|",
    "  |___/  ",
    "äº¬ç¨‹ä¸€ç¯è„šæ‰‹æ¶"
].join("\n");
program.version(Printer.default.fromString(input), "-v,--version");
//å‘½ä»¤è¡Œçš„å‚æ•°
const bindHandler = {
    init() {
        inquirer
            .prompt([
                {
                    type: "text",
                    "message": "1ï¸âƒ£  è¯·è¾“å…¥æ–‡ä»¶å¤¹åç§°",
                    name: "dirname"
                }
            ])
            .then(answers => {
                console.log(answers.dirname);
                shelljs.cd(`${userHome}/Desktop/`);
                const spinner = ora("ğŸ‘§ downloading.....");
                spinner.start();
                shelljs.mkdir(answers.dirname);
                //https://github.com/lgwebdream/yd-vue-kernel
            });
    }
}
program.option("-i,--init", "é¡¹ç›®åˆå§‹åŒ–ğŸ¶");
program
    .usage("<cmd> [options]").
    arguments("<cmd> [env]")
    .action((cmd, otherParmas) => {
        const handler = bindHandler[cmd];
        console.log(handler);
        if (typeof handler == "undefined") {
            console.error(chalk.yellow(`éå¸¸é—æ†¾ã€${cmd}ã€‘æš‚æœªæä¾›ğŸ¤¥`));
            process.exit(1);
        } else {
            handler(otherParmas);
        }
    })
program.parse(process.argv);